function _objectWithoutPropertiesLoose(e,a){if(null==e)return{};var t,o,l={},n=Object.keys(e);for(o=0;o<n.length;o++)t=n[o],a.indexOf(t)>=0||(l[t]=e[t]);return l}var _excluded=["containerId"],VideoSDKMeeting=function(){function e(){}var a=e.prototype;return a.init=function e(a){var t=void 0===a?{}:a,o=t.containerId,l=_objectWithoutPropertiesLoose(t,_excluded);try{var n=parent.document,r=parent.window;if(void 0===r||void 0===n)throw Error("No browser detected!");return Promise.resolve(this.generatePrebuiltSrc(l,r,n)).then(function(e){var a=n.createElement("iframe");a.id="videosdk-frame",a.src=e,a.allowfullscreen=!0,a.width="100%",a.height="100%",a.allow="camera *; microphone *; fullscreen; display-capture; allow-same-origin; allow-presentation; encrypted-media; midi; encrypted-media ",a.style.border=0,a.allowusermedia="allowusermedia";var t=null;if(o){var l=n.getElementById(o);if(!l)throw Error("No Container found with id "+o);t=l,l.appendChild(a)}else{var i=n.createElement("div");i.style.position="fixed",i.style.left=0,i.style.right=0,i.style.bottom=0,i.style.top=0,t=i,i.appendChild(a),n.body.style.margin="0px",n.body.style.padding="0px",n.body.style.height="100%",n.body.style.overflow="hidden",n.body.appendChild(i)}r.addEventListener("popstate",function(e){t.remove()})})}catch(i){return Promise.reject(i)}},a.fetchToken=function e(a){var t=a.apiKey,o=a.askJoin,l=a.apiBaseUrl;try{var n=[];o?n.push("ask_join"):n.push("allow_join");var r={apiKey:t};return n.length&&(r.permissions=n),Promise.resolve(fetch((l||"https://api.videosdk.live")+"/v1/prebuilt/token",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(r)})).then(function(e){var a,t=function(){if(200===e.status)return Promise.resolve(e.json()).then(function(e){a=e.token});throw Error("Could not fetch token.")}();return t&&t.then?t.then(function(e){return a}):a})}catch(i){return Promise.reject(i)}},a.generatePrebuiltSrc=function e(a,t){var o=void 0===a?{}:a,l=o.name,n=o.apiKey,r=o.meetingId,i=o.token,u=o.region,y=o.preferredProtocol,d=o.redirectOnLeave,s=o.micEnabled,c=o.webcamEnabled,p=o.participantCanToggleSelfWebcam,v=o.participantCanToggleSelfMic,f=o.participantTabPanelEnabled,b=o.participantCanLeave,k=o.chatEnabled,g=o.screenShareEnabled,h=o.pollEnabled,m=o.whiteboardEnabled,S=o.raiseHandEnabled,E=o.theme,w=o.branding,T=o.livestream,$=o.recording,C=o.hls,L=o.waitingScreen,P=o.permissions,U=o.joinScreen,j=o.leftScreen,M=o.layout,O=o.maxResolution,R=o.debug,A=o.isRecorder,B=o.videoConfig,W=o.screenShareConfig,D=o.audioConfig,V=o.i18n,_=o.maintainVideoAspectRatio,x=o.maintainLandscapeVideoAspectRatio,I=o.networkBarEnabled,z=o.participantId,K=o.meetingLayoutTopic,H=o.joinWithoutUserInteraction,F=o.notificationSoundEnabled,J=o.notificationAlertsEnabled,N=o.animationsEnabled,q=o.topbarEnabled,G=o.hideLocalParticipant,Q=o.alwaysShowOverlay,Y=o.sideStackSize,X=o.reduceEdgeSpacing,Z=o.embedBaseUrl,ee=o.apiBaseUrl,ea=o.mode;try{var et=function e(a){i=a;var o,n=null==t?void 0:null===(o=t.navigator)||void 0===o?void 0:o.userAgent,w=[{key:"micEnabled",value:s?"true":"false"},{key:"webcamEnabled",value:c?"true":"false"},{key:"name",value:l},{key:"meetingId",value:r||""},{key:"region",value:u||"sg001"},{key:"preferredProtocol",value:y||"UDP_ONLY"},{key:"canChangeLayout",value:eg?"true":"false"},{key:"redirectOnLeave",value:d||""},{key:"chatEnabled",value:k?"true":"false"},{key:"theme",value:E||"DEFAULT"},{key:"language",value:at||"en"},{key:"screenShareEnabled",value:g?"true":"false"},{key:"pollEnabled",value:"boolean"==typeof h?h?"true":"false":"true"},{key:"whiteboardEnabled",value:m?"true":"false"},{key:"participantCanToggleSelfWebcam",value:p?"true":"false"},{key:"participantCanToggleSelfMic",value:v?"true":"false"},{key:"raiseHandEnabled",value:S?"true":"false"},{key:"token",value:i||""},{key:"recordingEnabled",value:eK?"true":"false"},{key:"recordingWebhookUrl",value:eH||""},{key:"recordingAWSDirPath",value:eF||""},{key:"autoStartRecording",value:eJ?"true":"false"},{key:"recordingTheme",value:eN||"DEFAULT"},{key:"participantCanToggleRecording",value:"boolean"==typeof ev&&(ev?"true":"false")},{key:"brandingEnabled",value:eY?"true":"false"},{key:"brandLogoURL",value:e2||""},{key:"brandName",value:e3},{key:"participantCanLeave",value:"boolean"==typeof b?b?"true":"false":"true"},{key:"poweredBy",value:"boolean"==typeof e5?e5?"true":"false":"true"},{key:"liveStreamEnabled",value:eE?"true":"false"},{key:"autoStartLiveStream",value:ew?"true":"false"},{key:"liveStreamOutputs",value:JSON.stringify(eT||[])},{key:"liveStreamTheme",value:e$||"DEFAULT"},{key:"participantCanToggleOtherMic",value:er?"true":"false"},{key:"participantTabPanelEnabled",value:"boolean"==typeof f?f?"true":"false":"true"},{key:"partcipantCanToogleOtherScreenShare",value:ei?"true":"false"},{key:"participantCanToggleOtherWebcam",value:en?"true":"false"},{key:"participantCanToggleOtherMode",value:eu?"true":"false"},{key:"askJoin",value:el?"true":"false"},{key:"joinScreenEnabled",value:ej?"true":"false"},{key:"joinScreenMeetingUrl",value:eM||""},{key:"joinScreenTitle",value:eO||""},{key:"notificationSoundEnabled",value:"boolean"==typeof F?F?"true":"false":"true"},{key:"canPin",value:ek?"true":"false"},{key:"canCreatePoll",value:eh?"true":"false"},{key:"canToggleParticipantTab",value:"boolean"==typeof em?em?"true":"false":"true"},{key:"layoutType",value:ex},{key:"mode",value:ea},{key:"participantCanEndMeeting",value:"boolean"==typeof ed&&ed?"true":"false"},{key:"canDrawOnWhiteboard",value:"boolean"==typeof es?es?"true":"false":"true"},{key:"canToggleWhiteboard",value:"boolean"==typeof ec?ec?"true":"false":"true"},{key:"canToggleVirtualBackground",value:"boolean"==typeof ep?ep?"true":"false":"true"},{key:"canRemoveOtherParticipant",value:"boolean"==typeof ey&&ey?"true":"false"},{key:"leftScreenActionButtonLabel",value:eD},{key:"leftScreenActionButtonHref",value:eV},{key:"maxResolution",value:O||"sd"},{key:"animationsEnabled",value:"boolean"!=typeof N||N},{key:"topbarEnabled",value:"boolean"!=typeof q||q},{key:"notificationAlertsEnabled",value:"boolean"!=typeof J||J},{key:"debug",value:"boolean"==typeof R&&R},{key:"participantId",value:z||""},{key:"layoutPriority",value:eI||""},{key:"layoutGridSize",value:e8||"0"},{key:"hideLocalParticipant",value:"boolean"==typeof G&&G?"true":"false"},{key:"alwaysShowOverlay",value:"boolean"==typeof Q&&Q?"true":"false"},{key:"sideStackSize",value:Y},{key:"reduceEdgeSpacing",value:"boolean"==typeof X&&X?"true":"false"},{key:"isRecorder",value:"boolean"==typeof A&&A?"true":"false"},{key:"maintainVideoAspectRatio",value:"boolean"==typeof _?_?"true":"false":"true"},{key:"maintainLandscapeVideoAspectRatio",value:"boolean"==typeof x&&x?"true":"false"},{key:"networkBarEnabled",value:"boolean"==typeof I?I?"true":"false":"true"},{key:"leftScreenRejoinButtonEnabled",value:"boolean"==typeof eB?eB?"true":"false":"true"},{key:"joinWithoutUserInteraction",value:"boolean"==typeof H&&H?"true":"false"},{key:"rawUserAgent",value:n||""},{key:"meetingLayoutTopic",value:K||""},{key:"canChangeLayout",value:"boolean"==typeof eg&&eg?"true":"false"},{key:"participantCanToggleLivestream",value:"boolean"==typeof ef&&ef?"true":"false"},{key:"hlsEnabled",value:e0?"true":"false"},{key:"autoStartHls",value:e4?"true":"false"},{key:"participantCanToggleHls",value:"boolean"==typeof eb&&eb?"true":"false"},{key:"hlsPlayerControlsVisible",value:"boolean"==typeof eq&&eq?"true":"false"},{key:"hlsTheme",value:eG||"DEFAULT"},{key:"waitingScreenImageUrl",value:eL||""},{key:"waitingScreenText",value:eP||""},{key:"cameraResolution",value:eX||"h360p_w640p"},{key:"cameraOptimizationMode",value:eZ||"motion"},{key:"cameraMultiStream",value:"boolean"==typeof e7?e7?"true":"false":"true"},{key:"screenShareResolution",value:ae||"h720p_15fps"},{key:"screenShareOptimizationMode",value:aa||"motion"},{key:"micQuality",value:ao||"speech_standard"}].map(function(e){var a=e.key,t=e.value;return a+"="+encodeURIComponent(t)}).join("&");return(Z||"https://embed.videosdk.live/rtc-js-prebuilt/0.3.31/")+"/?"+w};T||(T={}),P||(P={}),U||(U={}),j||(j={}),M||(M={}),$||($={}),C||(C={}),L||(L={}),w||(w={}),B||(B={}),W||(W={}),D||(D={}),V||(V={});var eo=P,el=eo.askToJoin,en=eo.toggleParticipantWebcam,er=eo.toggleParticipantMic,ei=eo.toggleParticipantScreenshare,eu=eo.toggleParticipantMode,ey=eo.removeParticipant,ed=eo.endMeeting,es=eo.drawOnWhiteboard,ec=eo.toggleWhiteboard,ep=eo.toggleVirtualBackground,ev=eo.toggleRecording,ef=eo.toggleLivestream,eb=eo.toggleHls,ek=eo.pin,eg=eo.changeLayout,eh=eo.canCreatePoll,em=eo.canToggleParticipantTab;el&&(en=!1,er=!1,ei=!1);var eS=T,eE=eS.enabled,ew=eS.autoStart,eT=eS.outputs,e$=eS.theme,eC=L,eL=eC.imageUrl,eP=eC.text,eU=U,ej=eU.visible,eM=eU.meetingUrl,eO=eU.title,eR=j,eA=eR.actionButton,eB=eR.rejoinButtonEnabled,eW=eA=eA||{},eD=eW.label,eV=eW.href,e_=M,ex=e_.type,eI=e_.priority,e8=e_.gridSize,ez=$,eK=ez.enabled,eH=ez.webhookUrl,eF=ez.awsDirPath,eJ=ez.autoStart,eN=ez.theme,e1=C,e0=e1.enabled,e4=e1.autoStart,eq=e1.playerControlsVisible,eG=e1.theme,eQ=w,eY=eQ.enabled,e2=eQ.logoURL,e3=eQ.name,e5=eQ.poweredBy,e6=B,eX=e6.resolution,eZ=e6.optimizationMode,e7=e6.multiStream,e9=W,ae=e9.resolution,aa=e9.optimizationMode,at=V.lang,ao=D.quality;if(!i&&!n)throw Error('Any one of "token" or "apiKey" must be provided.');var al=i;return Promise.resolve(al?et(al):Promise.resolve(this.fetchToken({apiKey:n,askJoin:el,apiBaseUrl:ee})).then(et))}catch(an){return Promise.reject(an)}},e}();exports.VideoSDKMeeting=VideoSDKMeeting;
